<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surgery Tools Profit Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
            color: #e2e8f0;
            padding: 40px 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            margin-bottom: 40px;
            position: relative;
        }

        .header::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 30% 50%, rgba(217, 119, 6, 0.15) 0%, transparent 50%);
            border-radius: 20px;
            filter: blur(30px);
        }

        .header-content {
            position: relative;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .header-icon-box {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #b45309 0%, #d97706 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            box-shadow: 0 8px 24px rgba(217, 119, 6, 0.3);
            flex-shrink: 0;
        }

        .header-text {
            flex: 1;
        }

        .header-title-row {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .header-title-row h1 {
            font-size: 36px;
            font-weight: 700;
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .badge {
            background: rgba(217, 119, 6, 0.3);
            border: 1px solid rgba(217, 119, 6, 0.5);
            color: #fcd34d;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
        }

        .header-subtitle {
            color: #94a3b8;
            font-size: 14px;
        }

        .top-section {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 24px;
            margin-bottom: 32px;
        }

        .card {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(203, 213, 225, 0.1);
            border-radius: 12px;
            padding: 24px;
            transition: all 0.3s ease;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .card:hover {
            border-color: rgba(203, 213, 225, 0.2);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: 600;
        }

        .card-icon {
            font-size: 24px;
        }

        .card-purchase {
            border-top: 3px solid #d97706;
        }

        .card-profit {
            border-top: 3px solid #10b981;
            grid-column: span 2;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group:last-child {
            margin-bottom: 0;
        }

        label {
            display: block;
            font-size: 12px;
            font-weight: 600;
            color: #cbd5e1;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        input[type="number"] {
            width: 100%;
            padding: 12px;
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(203, 213, 225, 0.15);
            border-radius: 8px;
            color: #f1f5f9;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: rgba(217, 119, 6, 0.5);
            background: rgba(15, 23, 42, 0.9);
            box-shadow: 0 0 0 3px rgba(217, 119, 6, 0.1);
        }

        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        input[type="number"] {
            -moz-appearance: textfield;
        }

        .profit-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .profit-box {
            background: rgba(15, 23, 42, 0.5);
            border: 1px solid rgba(203, 213, 225, 0.1);
            border-radius: 8px;
            padding: 16px;
            transition: all 0.3s ease;
        }

        .profit-box:hover {
            background: rgba(15, 23, 42, 0.8);
            border-color: rgba(203, 213, 225, 0.2);
        }

        .profit-label {
            font-size: 11px;
            color: #94a3b8;
            font-weight: 600;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .profit-display {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .profit-icon {
            font-size: 18px;
        }

        .profit-value {
            font-size: 22px;
            font-weight: 700;
        }

        .profit-value.cost {
            color: #60a5fa;
        }

        .profit-value.revenue {
            color: #10b981;
        }

        .profit-unit {
            font-size: 12px;
            color: #64748b;
        }

        .profit-badge {
            background: rgba(16, 185, 129, 0.15);
            color: #10b981;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 10px;
            font-weight: 600;
        }

        .profit-badge.negative {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;
        }

        .resale-section {
            margin-bottom: 32px;
        }

        .resale-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            font-size: 24px;
            font-weight: 700;
        }

        .resale-icon {
            font-size: 28px;
        }

        .resale-subtitle {
            color: #94a3b8;
            font-size: 14px;
            margin-bottom: 24px;
        }

        .items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 16px;
        }

        .item-card {
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid rgba(203, 213, 225, 0.1);
            border-radius: 10px;
            padding: 16px;
            transition: all 0.3s ease;
        }

        .item-card:hover {
            background: rgba(30, 41, 59, 0.9);
            border-color: rgba(203, 213, 225, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
        }

        .item-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .item-icon {
            width: 32px;
            height: 32px;
            transition: transform 0.3s ease;
        }

        .item-card:hover .item-icon {
            transform: scale(1.2) rotate(5deg);
        }

        .item-info h3 {
            font-weight: 600;
            color: #f1f5f9;
            font-size: 13px;
            margin-bottom: 3px;
        }

        .item-info p {
            font-size: 11px;
            color: #94a3b8;
        }

        .item-label {
            font-size: 10px;
            color: #94a3b8;
            margin-bottom: 8px;
            display: block;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .item-input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            width: 100%;
        }

        .item-input-wrapper input {
            width: 100%;
            padding: 10px;
            padding-right: 60px;
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(203, 213, 225, 0.15);
            border-radius: 8px;
            color: #f1f5f9;
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .item-input-wrapper input:focus {
            outline: none;
            border-color: rgba(217, 119, 6, 0.5);
            background: rgba(15, 23, 42, 0.9);
            box-shadow: 0 0 0 3px rgba(217, 119, 6, 0.1);
        }

        .unit-text {
            position: absolute;
            right: 12px;
            color: #cbd5e1;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            user-select: none;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            border-radius: 4px;
        }

        .unit-text:hover {
            color: #f1f5f9;
            background: rgba(217, 119, 6, 0.15);
        }

        .unit-arrow {
            font-size: 8px;
            transition: transform 0.3s ease;
        }

        .unit-text:hover .unit-arrow {
            transform: scaleY(1.2);
        }

        @media (max-width: 1024px) {
            .top-section {
                grid-template-columns: 1fr;
            }

            .card-profit {
                grid-column: span 1;
            }

            .profit-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 640px) {
            body {
                padding: 20px 12px;
            }

            .header-title-row h1 {
                font-size: 24px;
            }

            .header-content {
                flex-direction: column;
                text-align: center;
            }

            .profit-grid {
                grid-template-columns: 1fr;
            }

            .items-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <div class="header-icon-box">‚öïÔ∏è</div>
                <div class="header-text">
                    <div class="header-title-row">
                        <h1>Surgery Tools</h1>
                        <span class="badge">Vending Tools</span>
                    </div>
                    <p class="header-subtitle">Calculate profits from reselling Master Surgeon pack contents</p>
                </div>
            </div>
        </div>

        <div class="top-section">
            <div class="card card-purchase">
                <div class="card-header">
                    <span class="card-icon">üì¶</span>
                    <h2>Pack Purchase Info</h2>
                </div>
                <div class="form-group">
                    <label>Number of MSurg Packs</label>
                    <input type="number" id="numPacks" min="1" value="1">
                </div>
                <div class="form-group">
                    <label>WL Cost Per Pack</label>
                    <input type="number" id="costPerPack" min="0" value="0">
                </div>
            </div>

            <div class="card card-profit">
                <div class="card-header">
                    <span class="card-icon">üìà</span>
                    <h2>Profit Analysis</h2>
                </div>
                <div class="profit-grid">
                    <div class="profit-box">
                        <p class="profit-label">Total Cost</p>
                        <div class="profit-display">
                            <span class="profit-icon">üí∞</span>
                            <span class="profit-value cost" id="totalCost">0</span>
                            <span class="profit-unit">WL</span>
                        </div>
                    </div>
                    <div class="profit-box">
                        <p class="profit-label">Total Revenue</p>
                        <div class="profit-display">
                            <span class="profit-icon">üí∞</span>
                            <span class="profit-value revenue" id="totalRevenue">0</span>
                            <span class="profit-unit">WL</span>
                        </div>
                    </div>
                    <div class="profit-box">
                        <p class="profit-label">Net Profit/Loss</p>
                        <div class="profit-display">
                            <span class="profit-icon">üí∞</span>
                            <span class="profit-value" id="netProfit">0</span>
                            <span class="profit-badge" id="profitBadge">0 WL</span>
                        </div>
                    </div>
                    <div class="profit-box">
                        <p class="profit-label">Profit Percentage</p>
                        <div class="profit-display">
                            <span class="profit-icon">üìä</span>
                            <span class="profit-value" id="profitPercentage">0</span>
                            <span class="profit-badge" id="percentageBadge">+0.0%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="resale-section">
            <div class="resale-header">
                <span class="resale-icon">‚öôÔ∏è</span>
                <h2>Resale Prices</h2>
            </div>
            <p class="resale-subtitle">Set your selling prices for each item from the MSurg pack</p>
            <div class="items-grid" id="itemsContainer"></div>
        </div>
    </div>

    <script>
        const items = [
            { name: 'Surg-E', itemsPerPack: 5, icon: 'Surg-E.webp', isSpecial: false },
            { name: 'Surgical Anesthetic', itemsPerPack: 20, icon: 'Surgical Anesthetic.webp', isSpecial: false },
            { name: 'Surgical Antibiotics', itemsPerPack: 20, icon: 'Surgical Antibiotics.webp', isSpecial: false },
            { name: 'Surgical Antiseptic', itemsPerPack: 20, icon: 'Surgical Antiseptic.webp', isSpecial: false },
            { name: 'Surgical Clamp', itemsPerPack: 20, icon: 'Surgical Clamp.webp', isSpecial: false },
            { name: 'Surgical Defibrillator', itemsPerPack: 20, icon: 'Surgical Defibrillator.webp', isSpecial: false },
            { name: 'Surgical Lab Kit', itemsPerPack: 20, icon: 'Surgical Lab Kit.webp', isSpecial: false },
            { name: 'Surgical Pins', itemsPerPack: 20, icon: 'Surgical Pins.webp', isSpecial: false },
            { name: 'Surgical Scalpel', itemsPerPack: 20, icon: 'Surgical Scalpel.webp', isSpecial: false },
            { name: 'Surgical Splint', itemsPerPack: 20, icon: 'Surgical Splint.webp', isSpecial: false },
            { name: 'Surgical Stitches', itemsPerPack: 20, icon: 'Surgical Stitches.webp', isSpecial: true },
            { name: 'Surgical Sponge', itemsPerPack: 20, icon: 'Surgical Sponge.webp', isSpecial: false },
            { name: 'Surgical Transfusion', itemsPerPack: 20, icon: 'Surgical Transfusion.webp', isSpecial: false },
            { name: 'Surgical Ultrasound', itemsPerPack: 20, icon: 'Surgical Ultrasound.webp', isSpecial: false },
        ];

        const state = {
            prices: {},
            unitTypes: {},
            stitchesPrice: 0,
            stitchesUnit: 'per'
        };

        items.forEach(item => {
            state.prices[item.name] = 0;
            state.unitTypes[item.name] = 'per';
        });

        function initializeItems() {
            const container = document.getElementById('itemsContainer');
            container.innerHTML = '';

            items.forEach(item => {
                const div = document.createElement('div');
                div.className = 'item-card';
                
                const inputId = item.isSpecial ? 'stitches-input' : `price-${item.name}`;
                const inputClass = item.isSpecial ? 'stitches-input' : 'price-input';
                const currentUnit = item.isSpecial ? state.stitchesUnit : state.unitTypes[item.name];
                const numPacks = parseFloat(document.getElementById('numPacks').value) || 1;
                const totalItems = item.itemsPerPack * numPacks;
                
                div.innerHTML = `
                    <div class="item-header">
                        <img src="${item.icon}" alt="${item.name}" class="item-icon">
                        <div class="item-info">
                            <h3>${item.name}</h3>
                            <p id="total-${item.name}">${totalItems} total</p>
                        </div>
                    </div>
                    <label class="item-label">Price</label>
                    <div class="item-input-wrapper">
                        <input 
                            type="number" 
                            id="${inputId}" 
                            class="${inputClass}" 
                            data-item="${item.name}" 
                            min="0" 
                            value="0" 
                            placeholder="Enter price"
                        >
                        <span class="unit-text" data-item="${item.name}">
                            ${currentUnit} <span class="unit-arrow">‚ñº</span>
                        </span>
                    </div>
                `;
                
                container.appendChild(div);
            });

            attachEventListeners();
        }

        function attachEventListeners() {
            document.querySelectorAll('.price-input').forEach(input => {
                input.addEventListener('input', (e) => {
                    state.prices[e.target.dataset.item] = parseFloat(e.target.value) || 0;
                    updateCalculations();
                });
            });

            document.querySelectorAll('.stitches-input').forEach(input => {
                input.addEventListener('input', (e) => {
                    state.stitchesPrice = parseFloat(e.target.value) || 0;
                    updateCalculations();
                });
            });

            document.querySelectorAll('.unit-text').forEach(span => {
                span.addEventListener('click', (e) => {
                    const itemName = e.target.closest('.unit-text').dataset.item;
                    
                    if (itemName === 'Surgical Stitches') {
                        state.stitchesUnit = state.stitchesUnit === 'per' ? 'each' : 'per';
                    } else {
                        state.unitTypes[itemName] = state.unitTypes[itemName] === 'per' ? 'each' : 'per';
                    }
                    
                    const newUnit = itemName === 'Surgical Stitches' ? state.stitchesUnit : state.unitTypes[itemName];
                    e.target.closest('.unit-text').innerHTML = `${newUnit} <span class="unit-arrow">‚ñº</span>`;
                    
                    updateCalculations();
                });
            });
        }

        function updateCalculations() {
            const numPacks = parseFloat(document.getElementById('numPacks').value) || 1;
            const costPerPack = parseFloat(document.getElementById('costPerPack').value) || 0;

            // Update total items display
            items.forEach(item => {
                const totalItems = item.itemsPerPack * numPacks;
                const totalEl = document.getElementById(`total-${item.name}`);
                if (totalEl) {
                    totalEl.textContent = `${totalItems} total`;
                }
            });

            let totalRevenue = 0;

            items.forEach(item => {
                const totalItemsInPacks = item.itemsPerPack * numPacks;

                if (item.isSpecial) {
                    // Surgical Stitches
                    if (state.stitchesUnit === 'per') {
                        // Per mode: price adalah WL per 200 stitches
                        const revenue = (totalItemsInPacks / 200) * state.stitchesPrice;
                        totalRevenue += revenue;
                    } else {
                        // Each mode: price adalah WL per 1 stitch (setara dengan per mode)
                        // Untuk 1 each = 1 per WL, maka: 200 items / 200 = 1 WL, yang berarti 1 stitch = 0.005 WL
                        // Tapi kita ingin 1 each = sama dengan 1 per WL
                        // Jadi formula: revenue = price / 200 (untuk membuat 1 each setara 1 per)
                        const revenue = (totalItemsInPacks * state.stitchesPrice) / 200;
                        totalRevenue += revenue;
                    }
                } else {
                    // Normal items
                    const unit = state.unitTypes[item.name];
                    if (unit === 'per') {
                        // Per mode: price adalah items per 1 WL
                        const itemsPerWL = state.prices[item.name];
                        if (itemsPerWL > 0) {
                            const revenue = totalItemsInPacks / itemsPerWL;
                            totalRevenue += revenue;
                        }
                    } else {
                        // Each mode: price adalah WL per setiap item
                        const revenue = totalItemsInPacks * state.prices[item.name];
                        totalRevenue += revenue;
                    }
                }
            });

            const totalCost = numPacks * costPerPack;
            const netProfit = totalRevenue - totalCost;
            const profitPercentage = totalCost > 0 ? (netProfit / totalCost) * 100 : 0;

            document.getElementById('totalCost').textContent = totalCost.toFixed(0);
            document.getElementById('totalRevenue').textContent = totalRevenue.toFixed(0);
            document.getElementById('netProfit').textContent = netProfit.toFixed(0);
            document.getElementById('profitPercentage').textContent = profitPercentage.toFixed(1);

            const profitBadge = document.getElementById('profitBadge');
            const percentageBadge = document.getElementById('percentageBadge');
            
            profitBadge.className = netProfit < 0 ? 'profit-badge negative' : 'profit-badge';
            profitBadge.textContent = `${netProfit >= 0 ? '+' : ''}${netProfit.toFixed(0)} WL`;

            percentageBadge.className = profitPercentage < 0 ? 'profit-badge negative' : 'profit-badge';
            percentageBadge.textContent = `${profitPercentage >= 0 ? '+' : ''}${profitPercentage.toFixed(1)}%`;
        }

        document.getElementById('numPacks').addEventListener('input', () => {
            initializeItems();
        });
        document.getElementById('costPerPack').addEventListener('input', updateCalculations);

        initializeItems();
        updateCalculations();
    </script>
</body>
</html>

